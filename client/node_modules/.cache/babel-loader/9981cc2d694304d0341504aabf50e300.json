{"ast":null,"code":"process;\nvar t = {\n  photo: \"https://api.pexels.com/v1/\",\n  video: \"https://api.pexels.com/videos/\",\n  collections: \"https://api.pexels.com/v1/collections/\"\n};\n\nfunction r(r, n) {\n  var e = {\n    method: \"GET\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n      \"User-Agent\": \"Pexels/JavaScript\",\n      Authorization: r\n    }\n  },\n      o = t[n];\n  return function (t, r) {\n    return fetch(\"\" + o + t + \"?\" + function (t) {\n      return Object.keys(t).map(function (r) {\n        return r + \"=\" + t[r];\n      }).join(\"&\");\n    }(r || {}), e).then(function (t) {\n      return t.json();\n    });\n  };\n}\n\nfunction n(t) {\n  var n = r(t, \"collections\");\n  return {\n    all: function (t) {\n      return n(\"\", t);\n    },\n    media: function (t) {\n      var r = t.id,\n          e = function (t, r) {\n        if (null == t) return {};\n        var n,\n            e,\n            o = {},\n            i = Object.keys(t);\n\n        for (e = 0; e < i.length; e++) r.indexOf(n = i[e]) >= 0 || (o[n] = t[n]);\n\n        return o;\n      }(t, [\"id\"]);\n\n      return n(\"\" + r, e);\n    }\n  };\n}\n\nfunction e(t) {\n  return !(!t || !t.photos);\n}\n\nvar o = {\n  __proto__: null,\n  isPhotos: e,\n  isVideos: function (t) {\n    return !(!t || !t.videos);\n  },\n  isError: function (t) {\n    return !!t.error;\n  }\n};\n\nfunction i(t) {\n  var n = r(t, \"photo\");\n  return {\n    search: function (t) {\n      return n(\"/search\", t);\n    },\n    curated: function (t) {\n      return void 0 === t && (t = {}), n(\"/curated\", t);\n    },\n    show: function (t) {\n      return n(\"/photos/\" + t.id);\n    },\n    random: function () {\n      try {\n        var t = Math.floor(1e3 * Math.random());\n        return Promise.resolve(this.curated({\n          page: t,\n          per_page: 1\n        })).then(function (t) {\n          return e(t) ? t.photos[0] : t;\n        });\n      } catch (t) {\n        return Promise.reject(t);\n      }\n    }\n  };\n}\n\nfunction u(t) {\n  var n = r(t, \"video\");\n  return {\n    search: function (t) {\n      return n(\"/search\", t);\n    },\n    popular: function (t) {\n      return void 0 === t && (t = {}), n(\"/popular\", t);\n    },\n    show: function (t) {\n      return n(\"/videos/\" + t.id);\n    }\n  };\n}\n\nfunction c(t) {\n  if (!t || \"string\" != typeof t) throw new TypeError(\"An ApiKey must be provided when initiating the Pexel's client.\");\n  return {\n    typeCheckers: o,\n    photos: i(t),\n    videos: u(t),\n    collections: n(t)\n  };\n}\n\nrequire(\"isomorphic-fetch\");\n\nexport { c as createClient };","map":{"version":3,"sources":["../src/constants.ts","../src/createFetchWrapper.ts","../src/generateCollectionEndpoints.ts","../src/typeCheckers.ts","../src/generatePhotoEndpoints.ts","../src/generateVideoEndpoints.ts","../src/createClient.ts"],"names":["process","baseUrls","photo","video","collections","createFetchWrapper","apiKey","type","options","method","headers","Accept","Content-Type","User-Agent","Authorization","baseUrl","path","params","fetch","stringifyParams","then","response","json","Object","keys","map","key","join","generateCollectionEndpoints","fetchWrapper","all","media","id","isPhotos","x","photos","videos","error","generatePhotoEndpoints","search","curated","show","random","randomPage","Math","floor","this","page","per_page","popular","require","createClient","TypeError","typeCheckers","generateVideoEndpoints"],"mappings":"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","sourcesContent":["export const photoBaseUrl = \"https://api.pexels.com/v1/\";\nexport const videoBaseUrl = \"https://api.pexels.com/videos/\";\nexport const collectionBaseUrl = \"https://api.pexels.com/v1/collections/\";\nexport const testApiKey = process.env.API_KEY as string;\n","import { Params } from \"./types\";\nimport { photoBaseUrl, videoBaseUrl, collectionBaseUrl } from \"./constants\";\n\ntype AllowedTypes = \"photo\" | \"video\" | \"collections\";\n\nconst baseUrls: { [T in AllowedTypes]: string } = {\n  photo: photoBaseUrl,\n  video: videoBaseUrl,\n  collections: collectionBaseUrl,\n};\n\nexport default function createFetchWrapper(apiKey: string, type: AllowedTypes) {\n  const options = {\n    method: \"GET\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n      \"User-Agent\": \"Pexels/JavaScript\",\n      Authorization: apiKey,\n    },\n  };\n\n  const baseUrl = baseUrls[type];\n\n  return <T extends Params>(path: string, params?: T) =>\n    fetch(\n      `${baseUrl}${path}?${stringifyParams(params || {})}`,\n      options\n    ).then((response) => response.json());\n}\n\nfunction stringifyParams<T extends Params>(params: T) {\n  return Object.keys(params)\n    .map((key) => `${key}=${params[key]}`)\n    .join(\"&\");\n}\n","import createFetchWrapper from \"./createFetchWrapper\";\nimport { Collection, PaginationParams, ErrorResponse, Medium } from \"./types\";\n\ntype AllReturn =\n  | {\n      page: number;\n      per_page: number;\n      collections: Collection[];\n    }\n  | ErrorResponse;\n\ntype MediaReturn =\n  | {\n      page: number;\n      per_page: number;\n      media: (Medium & { type: \"Video\" | \"Photo\" })[];\n    }\n  | ErrorResponse;\n\nexport default function generateCollectionEndpoints(apiKey: string) {\n  const fetchWrapper = createFetchWrapper(apiKey, \"collections\");\n\n  return {\n    all(params: PaginationParams): Promise<AllReturn> {\n      return fetchWrapper(\"\", params);\n    },\n    media({\n      id,\n      ...params\n    }: PaginationParams & {\n      id: string | number;\n      type?: \"photos\" | \"videos\";\n    }): Promise<MediaReturn> {\n      return fetchWrapper(`${id}`, params);\n    },\n  };\n}\n","import { Photos, Videos, ErrorResponse } from \"./types\";\n\n/**\n * A helper function to determine if the object is a valid Photo response\n */\nexport function isPhotos(x: any): x is Photos {\n  return !!(x && x.photos);\n}\n\n/**\n * A helper function to determine if the object is a valid Video response\n */\nexport function isVideos(x: any): x is Videos {\n  return !!(x && x.videos);\n}\n\n/**\n * A helper function to determine if the object was an error response\n */\nexport function isError(x: any): x is ErrorResponse {\n  return !!x.error;\n}\n","import createFetchWrapper from \"./createFetchWrapper\";\nimport {\n  Photo,\n  PaginationParams,\n  ErrorResponse,\n  Photos,\n  PhotosWithTotalResults,\n} from \"./types\";\nimport { isPhotos } from \"./typeCheckers\";\n\ntype SearchReturn = PhotosWithTotalResults | ErrorResponse;\ntype CuratedReturn = Photos | ErrorResponse;\ntype ShowReturn = Photo | ErrorResponse;\ntype RandomReturn = Photo | ErrorResponse;\n\nexport default function generatePhotoEndpoints(apiKey: string) {\n  const fetchWrapper = createFetchWrapper(apiKey, \"photo\");\n\n  return {\n    search(\n      params: PaginationParams & { query: string }\n    ): Promise<SearchReturn> {\n      return fetchWrapper(`/search`, params);\n    },\n    curated(params: PaginationParams = {}): Promise<CuratedReturn> {\n      return fetchWrapper(`/curated`, params);\n    },\n    show({ id }: { id: string | number }): Promise<ShowReturn> {\n      return fetchWrapper(`/photos/${id}`);\n    },\n    async random(): Promise<RandomReturn> {\n      const randomPage = Math.floor(1000 * Math.random());\n      const response = await this.curated({ page: randomPage, per_page: 1 });\n\n      if (isPhotos(response)) {\n        return response.photos[0] as RandomReturn;\n      }\n\n      return response as ErrorResponse;\n    },\n  };\n}\n","import createFetchWrapper from \"./createFetchWrapper\";\nimport {\n  PaginationParams,\n  ErrorResponse,\n  Video,\n  Videos,\n  VideoFilterParams,\n} from \"./types\";\n\ntype SearchReturn = Videos | ErrorResponse;\ntype PopularReturn = Videos | ErrorResponse;\ntype ShowReturn = Video;\n\nexport default function generatePhotoEndpoints(apiKey: string) {\n  const fetchWrapper = createFetchWrapper(apiKey, \"video\");\n\n  return {\n    search(\n      params: PaginationParams &\n        VideoFilterParams & {\n          query: string;\n        }\n    ): Promise<SearchReturn> {\n      return fetchWrapper(`/search`, params);\n    },\n    popular(\n      params: PaginationParams & VideoFilterParams = {}\n    ): Promise<PopularReturn> {\n      return fetchWrapper(`/popular`, params);\n    },\n    show({ id }: { id: string | number }): Promise<ShowReturn> {\n      return fetchWrapper(`/videos/${id}`);\n    },\n  };\n}\n","require(\"isomorphic-fetch\");\n\nimport generateCollectionEndpoints from \"./generateCollectionEndpoints\";\nimport generatePhotoEndpoints from \"./generatePhotoEndpoints\";\nimport generateVideoEndpoints from \"./generateVideoEndpoints\";\nimport * as typeCheckers from \"./typeCheckers\";\n\nexport default function createClient(apiKey: string) {\n  if (!apiKey || typeof apiKey !== \"string\") {\n    throw new TypeError(\n      `An ApiKey must be provided when initiating the Pexel's client.`\n    );\n  }\n\n  return {\n    typeCheckers,\n    photos: generatePhotoEndpoints(apiKey),\n    videos: generateVideoEndpoints(apiKey),\n    collections: generateCollectionEndpoints(apiKey),\n  };\n}\n"]},"metadata":{},"sourceType":"module"}